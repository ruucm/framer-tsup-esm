import{a as i}from"../../chunk-IDU63W3I.mjs";import*as o from"react";import{io as R}from"socket.io-client";var l={connect(r){return new Promise((n,c)=>{let e=R(r);e.on("connect",()=>(console.log("[framer-live-esm] Socket connected"),n(e))),e.on("reconnect",t=>{console.error("[framer-live-esm] Socket reconnected")}),e.on("connect_error",t=>(console.error(`[framer-live-esm] Socket had a connection error: ${t.message}`,e),c(t))),e.on("connect_timeout",t=>(console.error(`[framer-live-esm] Socket connection timed out: ${t.message}`),c(t)))})}};var u="http://127.0.0.1:8001";function f(){return i(this,null,function*(){if(!window.framerRealtimeSocket)try{console.log(`[framer-live-esm] Connecting on ${u}`);let r=yield l.connect(u);console.log("[framer-live-esm] Created socket"),window.framerRealtimeSocket=r}catch(r){console.error("[framer-live-esm] Error trying to create socket ",r)}})}function E(r,n){let[,c]=o.useState(0),e=o.useRef(0),t=o.useRef(null);return o.useLayoutEffect(()=>{let s=a=>i(this,null,function*(){console.log(`[framer-live-esm] Build complete, refreshing ${n}`);let d=yield import(`http://127.0.0.1:8000/${n}.mjs?${e.current}`);e.current++,t.current=d[n],c(e.current)}),m=(a=0)=>{if(!window.framerRealtimeSocket){setTimeout(()=>m(a+1),a+500);return}window.framerRealtimeSocket.on("build",s)};return m(),()=>{window.framerRealtimeSocket&&window.framerRealtimeSocket.off("build",s)}},[n]),o.useEffect(()=>{f()},[]),t.current||r}export{E as useRealtimeComponent};
